(this["webpackJsonpghibli-react-app"]=this["webpackJsonpghibli-react-app"]||[]).push([[0],{34:function(e,t,a){e.exports=a(55)},39:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),o=a.n(c),l=(a(39),a(70)),i=a(16),s=a(19),u=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Created using ",r.a.createElement("a",{href:"https://github.com/facebook/create-react-app"},"create-react-app"),","," ",r.a.createElement("a",{href:"https://reactstrap.github.io/"},"Reactstrap")," and the"," ",r.a.createElement("a",{href:"https://ghibliapi.herokuapp.com/"},"Studio Ghibli API")," this displays a list of films, characters, vechicles, species, and locations that appear in Studio Ghibli`s many films. Navigate through the categories using the links above"))},p=a(13),m=a.n(p),h=a(8),g=a(9),d=a(11),f=a(10),b=a(18),y=a(12),v="https://ghibliapi.herokuapp.com/";function k(e){return fetch(v+e)}function E(e,t){return fetch("".concat(v).concat(e,"/").concat(t))}function O(e,t){return!!t&&e.replace("".concat(v+t,"/"),"")}var j=a(58),w=a(59),C=a(60),x=a(61),L=a(62),N=a(63),I=a(71),S=a(56),A=a(57),M={films:{text:[{name:"description",hideLabel:!0},{name:"director"},{name:"producer"},{name:"release_date",label:"Release Date"},{name:"rt_score",label:"Rotten Tomatoes Score"}]},locations:{text:[{name:"climate"},{name:"terrain"},{name:"surface_water",label:"Surface Water"}],links:["residents","films"]},people:{text:[{name:"gender"},{name:"age"},{name:"eye_color",label:"Eye Color"},{name:"hair_color",label:"Hair color"}],links:["film","species"]},species:{text:[{name:"eye_colors",label:"Eye Colors"},{name:"hair_colors",label:"Hair Colors"}],links:["people","films"]},vehicles:{text:[{name:"description",hideLabel:!0},{name:"vehicle_class",label:"Vehicle Class"},{name:"length"}]}},R={films:[{category:"people",label:"Characters"},{category:"species"},{category:"locations"},{category:"vehicles"}],people:[{category:"films",label:"Appears in"},{category:"species",label:"Species"}],locations:[{category:"people",label:"Residents",keyword:"residents"},{category:"films",label:"Appears In"}],species:[{category:"people",label:"Members"},{category:"films",label:"Appears in"}],vehicles:[{category:"people",label:"Pilots"},{category:"films",label:"Appears in"}]},D=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.category,a=e.item,n=e.excerpt,c="";return M[t].text.map((function(e){if(e.label)c=e.label;else if(!e.hideLabel){var t=e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase();c=t}var o=a[e.name];return o&&o.length>300&&n&&(o="".concat(o.substring(0,300),"...")),r.a.createElement("p",{key:e.name},!e.hideLabel&&r.a.createElement("span",{className:"label"},c,": "),o)}))}}]),t}(n.Component),J=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},P=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).getRelatedLinks=function(e,t){var n=a.props.item,r=[],c=[];return n[t]&&!Array.isArray(n[t])?c.push(n[t]):c=n[t],c&&c.forEach((function(t){var a,n,c,o,l;return m.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(a=O(t,e))||!a.length){i.next=16;break}if(n={},null!==(c=sessionStorage.getItem(e))){i.next=13;break}return i.next=7,m.a.awrap(E(e,a));case 7:return o=i.sent,i.next=10,m.a.awrap(o.json());case 10:n=i.sent,i.next=15;break;case 13:l=JSON.parse(c),n=l[a];case 15:r.push(n);case 16:case"end":return i.stop()}}))})),r},a.displayLinks=function(){var e=a.props.category,t=a.state.relatedLinks,n=R[e];return n.length?n.filter((function(e){return t[e.category].length})).map((function(e){var n=e.label?e.label:J(e.category);return r.a.createElement("div",{key:n},r.a.createElement("h4",null,n),r.a.createElement("ul",null,a.displayLinkItems(t[e.category],e.category)))})):r.a.createElement("p",null,"None")},a.displayLinkItems=function(e,t){return e.map((function(e){var a="c/".concat(t,"/").concat(e.id);return r.a.createElement("li",{key:e.id},r.a.createElement(i.b,{to:a},e.title||e.name))}))},a.state={isLoaded:!1,relatedLinks:{}},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.category,a=R[t],n={};a.length&&a.forEach((function(t){var a=t.keyword||t.category;n[t.category]=e.getRelatedLinks(t.category,a)})),this.setState({isLoaded:!0,relatedLinks:n})}},{key:"render",value:function(){var e=this.state.isLoaded;return r.a.createElement("div",null,r.a.createElement("h3",null,"Related Links"),e?this.displayLinks():"Loading...")}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).toggleModal=function(){var e=a.props,t=e.category,n=e.routeProps,r="".concat("/ghibli-react-app","/c/").concat(t);n.history.push(r),a.setState((function(e){return{modal:!e.modal}}))},a.state={item:{},modal:!1},a.toggleModal=a.toggleModal.bind(Object(b.a)(a)),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getCategoryDetails()}},{key:"getCategoryDetails",value:function(){var e,t,a,n,r,c,o,l,i;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=this.props,t=e.category,a=e.item,n=e.routeProps,r={},"object"!==typeof(u=a)||0!==Object.getOwnPropertyNames(u).length){s.next=18;break}if(c=n.match.params.id,null!==(o=sessionStorage.getItem(t))){s.next=14;break}return s.next=8,m.a.awrap(E(t,c));case 8:return l=s.sent,s.next=11,m.a.awrap(l.json());case 11:r=s.sent,s.next=16;break;case 14:i=JSON.parse(o),r=i[c];case 16:s.next=19;break;case 18:r=a;case 19:this.setState({item:r,modal:!0});case 20:case"end":return s.stop()}var u}),null,this)}},{key:"render",value:function(){var e=this.props.category,t=this.state,a=t.item,n=t.modal;return r.a.createElement("div",null,r.a.createElement(I.a,{isOpen:n,autoFocus:!1},r.a.createElement(S.a,{toggle:this.toggleModal},a.title||a.name),r.a.createElement(A.a,null,r.a.createElement(D,{item:a,category:e,excerpt:!1}),r.a.createElement(P,{item:a,category:e}))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).displayJumbotron=function(e){var t=J(e);return r.a.createElement(j.a,null,r.a.createElement("h1",null,t))},a.displayCard=function(e){var t=a.props.category,n="".concat("/ghibli-react-app","/c/").concat(t,"/").concat(e.id);return r.a.createElement(w.a,{xs:"12",md:"6",lg:"4",key:e.id},r.a.createElement(C.a,{className:"h-100 card-body"},r.a.createElement(x.a,null,r.a.createElement("h2",null,e.name||e.title)),r.a.createElement(L.a,{tag:"div"},r.a.createElement(D,{item:e,category:t,excerpt:!0})),r.a.createElement(i.b,{to:n},"More Info")))},a.state={currentItem:{}},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.category,n=t.list,c=t.url,o=this.state.currentItem;return r.a.createElement("div",{className:"list-wrapper"},this.displayJumbotron(a),r.a.createElement(N.a,{className:"category-list"},Object.keys(n).map((function(t){return e.displayCard(n[t])}))),r.a.createElement(s.a,{path:"".concat(c,"/:id"),render:function(e){return r.a.createElement(_,{routeProps:e,item:o,category:a})}}))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={currentCategory:"",isLoaded:!1,listItems:{}},a.fetchCategoryItems=a.fetchCategoryItems.bind(Object(b.a)(a)),a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.category;this.fetchCategoryItems(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match;e.match.params.category!==t.params.category&&this.fetchCategoryItems(t.params.category)}},{key:"fetchCategoryItems",value:function(e){var t,a,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!M[e]){r.next=22;break}if(t=sessionStorage.getItem(e),a={},null!==t){r.next=20;break}return r.prev=4,r.next=7,m.a.awrap(k(e));case 7:return n=r.sent,r.next=10,m.a.awrap(n.json());case 10:n=r.sent,a=n.reduce((function(e,t){return e[t.id]=t,e}),{}),sessionStorage.setItem(e,JSON.stringify(a)),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(4),console.error(r.t0);case 18:r.next=21;break;case 20:a=JSON.parse(t);case 21:this.setState({isLoaded:!0,listItems:a,currentCategory:e});case 22:case"end":return r.stop()}}),null,this,[[4,15]])}},{key:"render",value:function(){var e=this.props.match,t=this.state,a=t.currentCategory,n=t.isLoaded,c=t.listItems;return n?0===Object.keys(c).length?r.a.createElement("div",null,"Invalid Category"):r.a.createElement("div",null,r.a.createElement(W,{category:a,list:c,url:e.url})):r.a.createElement("p",null,"loading...")}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.match.params.category!==t.currentCategory?{isLoaded:!1}:{isLoaded:!0}}}]),t}(n.Component),F=a(64),G=a(65),T=a(66),B=a(67),H=a(68),V=a(69),Q=[{url:"films",label:"Films"},{url:"locations",label:"Locations"},{url:"people",label:"People"},{url:"species",label:"Species"},{url:"vehicles",label:"Vehicles"}],$=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).toggleNavbar=function(){a.setState((function(e){return{collapsed:!e.collapsed}}))},a.mapNavbar=function(){return Q.map((function(e){return r.a.createElement(F.a,{key:e.label},r.a.createElement(i.c,{to:e.path,activeClassName:"active",className:"nav-link"},e.label))}))},a.toggleNavbar=a.toggleNavbar.bind(Object(b.a)(a)),a.state={collapsed:!0},a}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state.collapsed;return r.a.createElement(G.a,{className:"navbar-expand-lg",light:!0},r.a.createElement(T.a,{tag:"div"},r.a.createElement(i.c,{to:"/"},"Ghibli React App")),r.a.createElement(B.a,{onClick:this.toggleNavbar,className:"mr-2"}),r.a.createElement(H.a,{isOpen:!e,navbar:!0},r.a.createElement(V.a,null,Q.map((function(e){return r.a.createElement(F.a,{key:e.label},r.a.createElement(i.c,{to:"/c/".concat(e.url),activeClassName:"active",className:"nav-link"},e.label))})))))}}]),t}(n.Component),q=(a(53),a(54),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement((function(){return r.a.createElement(i.a,null,r.a.createElement(l.a,{fluid:!0},r.a.createElement($,null),r.a.createElement(l.a,null,r.a.createElement(s.a,{path:"/",exact:!0,component:u}),r.a.createElement(s.a,{path:"/c/:category",component:U}))))}),null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ghibli-react-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/ghibli-react-app","/service-worker.js");q?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):z(e)}))}}()}},[[34,1,2]]]);
//# sourceMappingURL=main.d59deafc.chunk.js.map