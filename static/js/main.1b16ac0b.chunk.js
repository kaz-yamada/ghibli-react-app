(this["webpackJsonpghibli-react-app"]=this["webpackJsonpghibli-react-app"]||[]).push([[0],{34:function(e,t,a){e.exports=a(55)},39:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),o=a.n(c),i=(a(39),a(70)),l=a(16),s=a(18),u=a(7),p=a(8),m=a(10),h=a(9),g=a(11),d=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Created using"," ",r.a.createElement("a",{href:"https://github.com/facebook/create-react-app"},"create-react-app"),", ",r.a.createElement("a",{href:"https://reactstrap.github.io/"},"Reactstrap")," and the"," ",r.a.createElement("a",{href:"https://ghibliapi.herokuapp.com/"},"Studio Ghibli API")," this displays a list of films, characters, vechicles, species, and locations that appear in Studio Ghibli's many films. Navigate through the categories using the links above"))}}]),t}(n.Component),f=a(13),b=a.n(f),y="https://ghibliapi.herokuapp.com/";function v(e){return fetch(y+e)}function k(e,t){return fetch("".concat(y).concat(e,"/").concat(t))}function E(e,t){return!!t&&e.replace("".concat(y+t,"/"),"")}var O=a(58),j=a(59),w=a(60),x=a(61),C=a(62),L=a(63),N=a(21),S=a(71),I=a(56),A=a(57),M={films:{text:[{name:"description",hideLabel:!0},{name:"director"},{name:"producer"},{name:"release_date",label:"Release Date"},{name:"rt_score",label:"Rotten Tomatoes Score"}]},locations:{text:[{name:"climate"},{name:"terrain"},{name:"surface_water",label:"Surface Water"}],links:["residents","films"]},people:{text:[{name:"gender"},{name:"age"},{name:"eye_color",label:"Eye Color"},{name:"hair_color",label:"Hair color"}],links:["film","species"]},species:{text:[{name:"eye_colors",label:"Eye Colors"},{name:"hair_colors",label:"Hair Colors"}],links:["people","films"]},vehicles:{text:[{name:"description",hideLabel:!0},{name:"vehicle_class",label:"Vehicle Class"},{name:"length"}]}},R={films:[{category:"people",label:"Characters"},{category:"species"},{category:"locations"},{category:"vehicles"}],people:[{category:"films",label:"Appears in"},{category:"species",label:"Species"}],locations:[{category:"people",label:"Residents",keyword:"residents"},{category:"films",label:"Appears In"}],species:[{category:"people",label:"Members"},{category:"films",label:"Appears in"}],vehicles:[{category:"people",label:"Pilots"},{category:"films",label:"Appears in"}]},D=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.category,a=e.item,n=e.excerpt,c="";return M[t].text.map((function(e){if(e.label)c=e.label;else if(!e.hideLabel){var t=e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase();c=t}var o=a[e.name];return o&&o.length>300&&n&&(o="".concat(o.substring(0,300),"...")),r.a.createElement("p",{key:e.name},!e.hideLabel&&r.a.createElement("span",{className:"label"},c,": "),o)}))}}]),t}(n.Component),J=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},P=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).getRelatedLinks=function(e,t){var n=a.props.item,r=[],c=[];return n[t]&&!Array.isArray(n[t])?c.push(n[t]):c=n[t],c&&c.forEach((function(a){var n,c,o,i,l;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!(n=E(a,e))||!n.length){s.next=16;break}if(c={},null!==(o=sessionStorage.getItem(e))){s.next=13;break}return s.next=7,b.a.awrap(k(t,n));case 7:return i=s.sent,s.next=10,b.a.awrap(i.json());case 10:c=s.sent,s.next=15;break;case 13:l=JSON.parse(o),c=l[n];case 15:r.push(c);case 16:case"end":return s.stop()}}))})),r},a.displayLinks=function(){var e=a.props.category,t=a.state.relatedLinks,n=R[e];return n.length?n.filter((function(e){return t[e.category].length})).map((function(e){var n=e.label?e.label:J(e.category);return r.a.createElement("div",{key:n},r.a.createElement("h4",null,n),r.a.createElement("ul",null,a.displayLinkItems(t[e.category],e.category)))})):r.a.createElement("p",null,"None")},a.displayLinkItems=function(e,t){return e.map((function(e){var a="".concat("/ghibli-react-app","/c/").concat(t,"/").concat(e.id);return r.a.createElement("li",{key:e.id},r.a.createElement(l.b,{to:a},e.title||e.name))}))},a.state={isLoaded:!1,relatedLinks:{}},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.category,a=R[t],n={};a.length&&a.forEach((function(t){var a=t.keyword||t.category;n[t.category]=e.getRelatedLinks(t.category,a)})),this.setState({isLoaded:!0,relatedLinks:n})}},{key:"render",value:function(){var e=this.state.isLoaded;return r.a.createElement("div",null,r.a.createElement("h3",null,"Related Links"),e?this.displayLinks():"Loading...")}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).toggleModal=function(){var e=a.props.routeProps,t=a.state.category;e.history.push("/c/".concat(t)),a.setState((function(e){return{modal:!e.modal}}))},a.state={item:{},modal:!1},a.toggleModal=a.toggleModal.bind(Object(N.a)(a)),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getCategoryDetails()}},{key:"getCategoryDetails",value:function(){var e,t,a,n,r,c,o,i,l;return b.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=this.props,t=e.category,a=e.item,n=e.routeProps,r={},"object"!==typeof(u=a)||0!==Object.getOwnPropertyNames(u).length){s.next=18;break}if(c=n.match.params.id,null!==(o=sessionStorage.getItem(t))){s.next=14;break}return s.next=8,b.a.awrap(k(t,c));case 8:return i=s.sent,s.next=11,b.a.awrap(i.json());case 11:r=s.sent,s.next=16;break;case 14:l=JSON.parse(o),r=l[c];case 16:s.next=19;break;case 18:r=a;case 19:this.setState({item:r,modal:!0,category:t});case 20:case"end":return s.stop()}var u}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.item,a=e.modal,n=e.category;return r.a.createElement("div",null,r.a.createElement(S.a,{isOpen:a,autoFocus:!1},r.a.createElement(I.a,{toggle:this.toggleModal},t.title||t.name),r.a.createElement(A.a,null,r.a.createElement(D,{item:t,category:n,excerpt:!1}),r.a.createElement(P,{item:t,category:n}))))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).displayJumbotron=function(e){var t=J(e);return r.a.createElement(O.a,null,r.a.createElement("h1",null,t))},a.displayCard=function(e){var t=a.props.category,n="".concat("/ghibli-react-app","/c/").concat(t,"/").concat(e.id);return r.a.createElement(j.a,{xs:"12",md:"6",lg:"4",key:e.id},r.a.createElement(w.a,{className:"h-100 card-body"},r.a.createElement(x.a,null,r.a.createElement("h2",null,e.name||e.title)),r.a.createElement(C.a,{tag:"div"},r.a.createElement(D,{item:e,category:t,excerpt:!0})),r.a.createElement(l.b,{to:n},"More Info")))},a.state={currentItem:{}},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.category,n=t.list,c=t.url,o=this.state.currentItem;return r.a.createElement("div",{className:"list-wrapper"},this.displayJumbotron(a),r.a.createElement(L.a,{className:"category-list"},Object.keys(n).map((function(t){return e.displayCard(n[t])}))),r.a.createElement(s.a,{path:"".concat(c,"/:id"),render:function(e){return r.a.createElement(_,{routeProps:e,item:o,category:a})}}))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={currentCategory:"",isLoaded:!1,listItems:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match;this.fetchCategoryItems(e.params.category)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match;t.params.category!==e.match.params.category&&this.fetchCategoryItems(t.params.category)}},{key:"fetchCategoryItems",value:function(e){var t,a,n;return b.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=sessionStorage.getItem(e),a={},null!==t){r.next=19;break}return r.prev=3,r.next=6,b.a.awrap(v(e));case 6:return n=r.sent,r.next=9,b.a.awrap(n.json());case 9:a=(a=r.sent).reduce((function(e,t){return e[t.id]=t,e}),{}),sessionStorage.setItem(e,JSON.stringify(a)),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),console.error(r.t0);case 17:r.next=20;break;case 19:a=JSON.parse(t);case 20:this.setState({currentCategory:e,listItems:a,isLoaded:!0});case 21:case"end":return r.stop()}}),null,this,[[3,14]])}},{key:"render",value:function(){var e=this.state.isLoaded,t=this.props.match;if(!e)return r.a.createElement("p",null,"loading...");var a=this.state,n=a.listItems,c=a.currentCategory;return r.a.createElement("div",null,r.a.createElement(W,{category:c,list:n,url:t.url}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.match.params.category!==t.currentCategory?{isLoaded:!1}:null}}]),t}(n.Component),F=function(){return r.a.createElement("main",null,r.a.createElement(s.a,{path:"".concat("/ghibli-react-app","/"),exact:!0,component:d}),r.a.createElement(s.a,{path:"".concat("/ghibli-react-app","/c/:category"),component:U}))},G=a(64),T=a(65),B=a(66),H=a(67),V=a(68),Q=a(69),$=[{path:"/c/films",label:"Films"},{path:"/c/locations",label:"Locations"},{path:"/c/people",label:"People"},{path:"/c/species",label:"Species"},{path:"/c/vehicles",label:"Vehicles"}],q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).toggleNavbar=function(){a.setState((function(e){return{collapsed:!e.collapsed}}))},a.mapNavbar=function(){return $.map((function(e){return r.a.createElement(G.a,{key:e.label},r.a.createElement(l.c,{exact:!0,to:"".concat("/ghibli-react-app").concat(e.path),activeClassName:"active",className:"nav-link"},e.label))}))},a.toggleNavbar=a.toggleNavbar.bind(Object(N.a)(a)),a.state={collapsed:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.collapsed;return r.a.createElement(T.a,{className:"navbar-expand-lg",light:!0},r.a.createElement(B.a,{tag:"div"},r.a.createElement(l.c,{to:"/ghibli-react-app"},"Ghibli React App")),r.a.createElement(H.a,{onClick:this.toggleNavbar,className:"mr-2"}),r.a.createElement(V.a,{isOpen:!e,navbar:!0},r.a.createElement(Q.a,null,this.mapNavbar())))}}]),t}(n.Component),z=(a(53),a(54),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function K(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement((function(){return r.a.createElement(l.a,null,r.a.createElement(i.a,{fluid:!0},r.a.createElement(q,null),r.a.createElement(i.a,null,r.a.createElement(F,null))))}),null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ghibli-react-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/ghibli-react-app","/service-worker.js");z?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):K(e)}))}}()}},[[34,1,2]]]);
//# sourceMappingURL=main.1b16ac0b.chunk.js.map